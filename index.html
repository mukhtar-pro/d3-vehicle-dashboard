<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="https://d3js.org/logo.svg" />
    <title>Real-Time Electric Vehicles Monitoring Dashboard</title>

    <script src="lib/d3/d3.v7.min.js"></script>
    <link rel="stylesheet" href="styles/main.css" />
    <script src="https://unpkg.com/topojson-client@3"></script>
  </head>
  <body>
    <button class="theme-toggle" id="theme-toggle">
      ‚òÄÔ∏è Toggle Light Mode
    </button>

    <section class="dashboard">
      <h1>Real-Time Electric Vehicle Monitoring</h1>
      <div class="search-box">
        <div class="search">
          <input
            class="search-input"
            type="text"
            placeholder="Search for a Manufacturer"
          />
        </div>
      </div>
    </section>

    <div id="app">
      <main class="charts">
        <!-- c1 -->
        <div id="bar-chart-container">
          <div class="flex-container">
            <div class="headings">
              <h3>Total Number of Sold Cars</h3>
              <p>To the nearest 100</p>
            </div>
            <div class="bar-chart-dropdown" id="bc-dropdown-content">
              <button class="bar-chart-dropdown-btn">Filter</button>
              <div class="bar-chart-dropdown-content"></div>
            </div>
          </div>
          <svg id="bar-chart"></svg>
        </div>

        <!-- c2 -->
        <div id="pie-chart-container">
          <div class="headings">
            <h3>Proportion on Electric Vehicle Types</h3>
            <p>Overall breakdown</p>
          </div>
          <svg id="pie-chart"></svg>
          <div class="legend-pie">
            <div class="legend-item-pie">
              <span class="legend-dot-pie" style="color: #f5a067">&#11044;</span>
              <span class="legend-text-pie">Battery Electric Vehicle (BEV)</span>
            </div>
            <div class="legend-item-pie">
              <span class="legend-dot-pie" style="color: #5e3fbe">&#11044;</span>
              <span class="legend-text-pie">Plug-In Hybrid Electric Vehicle (PHEV)</span>
            </div>
          </div>
        </div>

        <!-- c3 -->
        <div id="stacked-bar-chart-container">
          <div class="headings">
            <h3>Number of Electric Vehicle Types Sold By Year</h3>
            <p>Total count for all manufacturers</p>
          </div>
          <svg id="stacked-bar-chart"></svg>
          <div class="legend-stackedbar">
            <div class="legend-item-stackedbar">
              <div>
                <span class="legend-dot-stackedbar" style="color: #f5a067">&#11044;</span>
                <span class="legend-text-stackedbar">Battery Electric Vehicle (BEV)</span>
              </div>
              <div class="legend-item-stackedbar">
                <span class="legend-dot-stackedbar" style="color: #5e3fbe">&#11044;</span>
                <span class="legend-text-stackedbar">Plug-In Hybrid Electric Vehicle (PHEV)</span>
              </div>
            </div>
          </div>
        </div>

        <!-- c4 -->
        <div id="line-chart-container">
          <div class="headings">
            <h3>Electric Vehicles Owned Every Year</h3>
            <p>Categorized by manufacturer</p>
          </div>

          <!-- Dropdown for filtering manufacturers -->
          <div class="line-chart-dropdown" id="lc-dropdown-content">
            <button class="line-chart-dropdown-btn">Filter</button>
            <div class="line-chart-dropdown-content">
              <!-- Checkboxes will be added here by JavaScript -->
            </div>
          </div>

          <!-- The line chart SVG -->
          <svg id="line-chart"></svg>

          <!-- Legend for the line chart -->
          <div class="legend-line">
            <!-- Dynamically generated legend will be inserted here -->
          </div>
        </div>

        <!-- c5 (Change the name to match the rest of the containers) -->
        <div id="grouped-bar-chart-container">
          <div class="headings">
            <h3>Distribution of Clean Alternate Fuel</h3>
            <p>Trends over the years</p>
          </div>
          <svg id="grouped-chart"></svg>
          <div class="legend-stackedbar">
            <div class="legend-item-stackedbar">
              <div>
                <span class="legend-dot-stackedbar" style="color: #f5a067">&#11044;</span>
                <span class="legend-text-stackedbar">Unkown Eligibility: Battery Range Not Researched</span>
              </div>
              <div class="legend-item-stackedbar">
                <span class="legend-dot-stackedbar" style="color: #5e3fbe">&#11044;</span>
                <span class="legend-text-stackedbar">Clean Alternative Fuel Vehicle Eligible</span>
              </div>
            </div>
          </div>
        </div>

        <!-- c6 (Change the name to match the rest of the containers) -->
        <!-- <div class="card-5"></div> -->
        <div class="card-6">
          <div id="line-chart-container">
            <div class="headings">
              <h3>Electric Vehicles Owned by Location</h3>
              <p>Categorized by manufacturer</p>
            </div>
            <div id="map-chart"></div>
            <div class="legend-line"></div>
          </div>
        </div>

        <!-- <div class="card-7"></div> -->
        <!-- c7 (Change the name to match the rest of the containers) -->
        <!-- <div class="card-7"></div> -->
        <!-- c8 (Change the name to match the rest of the containers) -->

        <div id="scatter-plot-container">
          <div class="headings">
            <h3>Average Electric Range Per Year</h3>
            <p>Trends over the years</p>
          </div>
          <svg id="scatter-plot"></svg>
        </div>
      </main>
    </div>

    <script type="module" src="scripts/main.js"></script>
    <script>
      // Theme toggle functionality
      const themeToggle = document.getElementById('theme-toggle');
      const html = document.documentElement;

      // Check for saved theme preference, default to dark
      const savedTheme = localStorage.getItem('theme') || 'dark';
      html.setAttribute('data-theme', savedTheme);
      themeToggle.textContent = savedTheme === 'light' ? 'üåô Toggle Dark Mode' : '‚òÄÔ∏è Toggle Light Mode';

      themeToggle.addEventListener('click', () => {
        const currentTheme = html.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';

        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        themeToggle.textContent = newTheme === 'light' ? 'üåô Toggle Dark Mode' : '‚òÄÔ∏è Toggle Light Mode';
      });
    </script>
  </body>
</html>

<!-- testing -->
